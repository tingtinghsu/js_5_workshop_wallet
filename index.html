<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
  <style>
tr .remove{
  visibility: hidden;
}
tr:hover .remove {
  visibility: visible;
}
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container"><a class="navbar-brand" href="#">5xWallet</a></div>
  </nav>
  <div class="container mt-4">
    <div class="row bg-light p-3">
      <div class="col search">
        <form id="search-form">
          <div class="form-row">
            <div class="col">
              <select class="form-control" name="category">
                <option selected value>---想要搜尋的範圍---</option>
                <option value="食">食</option>
                <option value="衣">衣</option>
                <option value="住">住</option>
                <option value="行">行</option>
                <option value="育">育</option>
                <option value="樂">樂</option>
              </select>
            </div>
            <div class="col">
              <input type="month" name="month" class="form-control">
            </div>
            <div class="col"><button type="submit" class="btn btn-dark"><i class="fa fa-search" aria-hidden="true"></i></button></div>
          </div>
        </form>
      </div>
    </div>
    <div class="row flex-row-reverse mt-5">

      <div class="col col-md-4">
        <div class="card">
          <div class="card-header">
            <h5>記個帳吧</h5>
          </div>
          <div class="card-body">
            <form id="item-form">
              <div class="form-group">
                <label for="category">分類</label>
                <select class="form-control" name="category">
                  <option value="食" selected>食</option>
                  <option value="衣">衣</option>
                  <option value="住">住</option>
                  <option value="行">行</option>
                  <option value="育">育</option>
                  <option value="樂">樂</option>
                </select>
              </div>
              <div class="form-group">
                <label for="date">日期</label>
                <input type="date" name="date" class="form-control">
              </div>
              <div class="form-group">
                <label for="amount">金額</label>
                <input type="number" name="amount" class="form-control">
              </div>
              <div class="form-group">
                <label for="description">描述</label>
                <input type="text" name="description" class="form-control">
              </div>
              <button type="submit" class="btn btn-primary">Submit</button>
            </form>
          </div>
        </div>
      </div>
      <div class="col col-md-8">
        <table class="table table-hover">
          <thead class="thead-dark">
            <tr>
              <th scope="col">日期</th>
              <th scope="col">類別</th>
              <th scope="col">描述</th>
              <th scope="col">金額</th>
              <th scope="col"></th>
            </tr>
          </thead>
          <tbody id="records-panel">
            <!-- <tr class="item">
              <th scope="row">2020&#45;08&#45;09</th>
              <td>食</td>
              <td>漢堡王</td>
              <td>150</td>
              <td><span class="remove">x</span></td>
            </tr> -->
            <!-- <template id="item-template">
              <tr class="item">
                <th scope="row">2020&#45;08&#45;09</th>
                <td>食</td>
                <td>漢堡王</td>
                <td>150</td>
                <td><span class="remove">x</span></td>
              </tr>
            </template> -->
            <!-- <div id="item-template">
              <tr class="item" id="item-template">
                <th class="date" scope="row">1</th>
                <td class="category"></td>
                <td class="description"></td>
                <td class="amount"></td>
                <td><span class="remove">x</span></td>
              </tr>
            </div> -->
            <tr class="item" id="item-template">
              <th class="date" scope="row"></th>
              <td class="category"></td>
              <td class="description"></td>
              <td class="amount"></td>
              <td><span class="remove">x</span></td>
            </tr>
            <!-- <tr> -->
            <!--   <th scope="row">2020&#45;08&#45;09</th> -->
            <!--   <td>衣</td> -->
            <!--   <td>uniqlo</td> -->
            <!--   <td>1350</td> -->
            <!--   <td><span class="remove">x</span></td> -->
            <!-- </tr> -->
            <!-- <tr> -->
            <!--   <th scope="row">2020&#45;08&#45;09</th> -->
            <!--   <td>住</td> -->
            <!--   <td>房租</td> -->
            <!--   <td>15000</td> -->
            <!--   <td><span class="remove">x</span></td> -->
            <!-- </tr> -->
            <!-- <tr> -->
            <!--   <th scope="row">2020&#45;08&#45;09</th> -->
            <!--   <td>行</td> -->
            <!--   <td>悠遊卡</td> -->
            <!--   <td>500</td> -->
            <!--   <td><span class="remove">x</span></td> -->
            <!-- </tr> -->
          </tbody>
        </table> 
      </div>
    </div>

  </div>
  <!-- <script src="index.js"></script>
  <script src="search.js"></script>
  <script src="init.js"></script>
  <script src="my.js"></script> -->
  <script>
    document.addEventListener("DOMContentLoaded", function(){
      let note = document.forms[1]
      var result = []
      note.addEventListener("submit", function(e){

      let note = document.forms[1]

      let category = document.forms[1].elements.category.value
      let date = document.forms[1].elements.date.value
      let amount = document.forms[1].elements.amount.value
      let description = document.forms[1].elements.description.value

      let record = {
        category,
        date,
        amount,
        description
      }
      // console.log(JSON.stringify(result))
      result.push(record)
      // console.log(result)
      localStorage.setItem('records',JSON.stringify(result) )
      // console.log(JSON.parse(localStorage.getItem('records')))
      generateItem(JSON.parse(localStorage.getItem('records')))
      // 把提出的JSON格式印出來
      

      e.preventDefault()
      })
      
    })

    // let textWrap = document.querySelector("#item-template")

    function generateItem(e){
      const template = document.querySelector("#item-template")
      const date = template.querySelector(".date")
      const category = template.querySelector(".category")
      const description = template.querySelector(".description")
      const amount = template.querySelector(".amount")
      // err.textContent = `Errr * ${counter++}`
      // // amount = e.amount;
      let len = e.length
      
      date.textContent = e[len - 1].date
      category.textContent = e[len - 1].category
      description.textContent = e[len - 1].description
      amount.textContent = e[len - 1].amount

      // date.textContent = e.date
      // category.textContent = e.category
      // description.textContent = e.description
      // amount.textContent = e.amount
      // console.log(e.category)
      // console.log(template)
      const clone = document.importNode(template, true)
      console.log(clone)
      // const append = document.appendChild(template)
      document.querySelector('#records-panel').appendChild(clone)
      // textWrap.appendChild(clone) 

      // textWrap.appendChild(append)
      // console.log("done")
    }
  </script>
</body>

</html>
